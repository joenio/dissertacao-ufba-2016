#!/usr/bin/perl
use utf8;
use open ':locale';
use Modern::Perl '2014';
use lib 'lib';
use Dissertacao qw( bibtex_load clean );

=head1 NAME

clean - remove some custom fields from the bibtex files

=head1 SYNOPSIS

  ./bin/clean <input-file> [<input-file> [<input-file>]]

=head1 DESCRIPTION

Remove fields (really_refers_to_software, contribution_weight,
weightless_contributions, conference, step) from each entry and prints results
to the standard output.

=cut

if (@ARGV < 1) {
  warn "E: missing options!";
  say "Usage: $0 <input-file> [<input-file> [<input-file>]]";
  exit 1;
}

my %references = clean bibtex_load @ARGV;
foreach (sort keys %references) {
  print $references{$_}->print_s;
}
